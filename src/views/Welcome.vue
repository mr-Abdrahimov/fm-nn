<template>
  <div class="welcome">
    <div style="background: #000; padding: 15px;">
      <div class="container d-flex justify-content-between">
        <div>
          <img src="https://formatmind.com/wp-content/uploads/2019/09/MF_logo-123.png" width="140px" />
        </div>
        <div>
        </div>
      </div>
    </div>
    <div class="container mt-5">
      <div class="row">
        <h2 class="col-12 mt-3 s36">
          Проект оценки и развития HR резерва правительства<br />
          Нижегородской области по методике Формат Мышления
        </h2>
      </div>
    </div>
    <div class="block-1 mt-5 pb-5">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h4 class="mt-5 mb-3">1. Блок <span style="font-weight: normal">“Поставленные задачи и представленные решения”</span></h4>
          <div class="text-subline"></div>
        </div>
          <div class="col-md-6 mt-4-5 ">
              <div class="block-1-item">
                  <h4 class="mb-3">Поставлены задачи</h4>
                  <p>
                      <b>1.</b> Определение стиля руководства;<br />
                      <b>2.</b> Внедрение инновационных подходов в оценке персонала;<br />
                      <b>3.</b> Определение эффективности работы персонала.
                  </p>
              </div>
          </div>
          <div class="col-md-6 mt-4-5 ">
              <div class="block-1-item">
                  <h4 class="mb-3">Представлены следующие решения</h4>
                  <p>
                      <b>1.</b> Выявить формат мышления каждого человека персонально;<br />
                      <b>2.</b> Понять, в какой сфере каждый человек будет эффективен;<br />
                      <b>3.</b>  Выявить потенциально неэффективных для стоящих задач лиц.
                  </p>
              </div>
          </div>
      </div>
    </div>
    </div>
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-12">
          <h4 class="mt-2 mb-3">2. Блок <span style="font-weight: normal">“Вводная информация о теории”</span></h4>
          <div class="text-subline"></div>
        </div>
        <div class="col-md-12 mt-4">
          <h4 class="mb-4">Формат Мышления (ФМ)</h4>
          <p>
            Характеристики работы человеческого мозга с информацией: с какой скоростью он принимает решения, какой комфортный объем потребления информации, какая структура ее обработки. Определив эти данные с помощью тестирования и специально созданного математического алгоритма мы получаем исчерпывающую информацию об управленческих качествах человека, его явной и скрытой мотивации, а также о потенциале развития и системных рисках в деятельности.
          </p>
          <div class="text-subline-2 mt-4"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
            <h4 class="mt-5"><span style="font-weight: normal;">ФМ по объему потребления информации</span></h4>
        </div>

        <div class="col-md-4">
          <div class="block-format">
            <div class="block-title-f">
              <img src="../assets/images/i-format.svg"/> Я-формат
            </div>
            <div class="text">
              Комфортное потребление информации небольшими блоками.<br />
              Люди этого формата хорошо понимают, что происходит <b>здесь и сейчас</b>, отлично планируют на ближайшее будущее <b>(на срок до одного года)</b>.
              Основная мотивация и ориентация Я-форматных личностей - личная реализация и ресурсность. Это именно тот формат, который создает нашу реальность в данный момент.
            </div>
              <div class="text-subline-2 mt-3"></div>
              <div class="format-disc-footer">
              <span>Зона “Я” формата на косинусоиде <img src="../assets/images/arrow-down-black.svg" /></span>
              </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="block-format">
            <div class="block-title-f">
              <img src="../assets/images/we-format.svg"/> Мы-формат
            </div>
            <div class="text">
              Люди этого формата идеальны для участия в социальных проектах, в событиях, в которых задействована <b>система, коммуникация, команда</b>.
              Им интересны “многослойные” проекты, в которых видна перспектива, несколько векторов развития. Люди этого формата могут эффективно планировать <b>на срок до 2-3 лет</b>.
            </div>
              <div class="text-subline-2 mt-3"></div>
              <div class="format-disc-footer format-disc-footer-active">
                  <span>Зона “Мы” формата на косинусоиде <img src="../assets/images/arrow-down-white.svg" /></span>
              </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="block-format">
            <div class="block-title-f">
              <img src="../assets/images/world-format.svg"/> Мир-формат
            </div>
            <div class="text">
              Потребление информации идет большими блоками. Люди этого формата  увлекаются мыслями о глобальном, о мироустройстве,
              о создании некого единого информационного поля, которое  работает по определенным принципам и законам.
              Люди этого формата подходят <b>к своей деятельности с большим размахом</b>. Они могут эффективно осуществлять планирование <b>на срок от пяти лет и более.
              Тяжело дробят проект на небольшие задачи.</b>
            </div>
              <div class="text-subline-2 mt-3"></div>
              <div class="format-disc-footer" style="text-align: center; padding: 15px; font-weight: bold;">
                  <span>Зона “Мы” формата на косинусоиде <img src="../assets/images/arrow-down-black.svg" /></span>
              </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 mt-5">
          <img style="width: 100%" alt="" src="../assets/images/graph.svg"/>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 mt-5">
            <h4><span style="font-weight: normal;">ФМ по структуре обработки информации:</span></h4>
        </div>
        <div class="col-md-6 mt-1">
          <div class="block-format">
            <div class="block-title green">
              <img src="../assets/images/block-sys.svg"/> Системщик
            </div>
            <div class="text">
              Человек, который все приводит к единой структуре и придерживается выбранного сценария.
            </div>
          </div>
        </div>
        <div class="col-md-6 mt-1">
          <div class="block-format">
            <div class="block-title blue">
              <img src="../assets/images/block-met.svg"/> Метафорщик
            </div>
            <div class="text">
              Человек, который способен интуитивно усовершенствовать систему новыми идеями, улучшить.
            </div>
          </div>
        </div>
        <div class="col-md-6 mt-1">
          <div class="block-format">
            <div class="block-title purple">
              <img src="../assets/images/block-ana.svg"/> Аналитик
            </div>
            <div class="text">
              Люди, которые занимаются исследованием различных вариантов развития определенной деятельности.
            </div>
          </div>
        </div>
        <div class="col-md-6 mt-1">
          <div class="block-format">
            <div class="block-title red">
              <img src="../assets/images/block-pre.svg"/> Презентатор
            </div>
            <div class="text">
              Человек, который представляет, демонстрирует, завлекает людей своей деятельностью. (Активно, быстро, импульсивно).
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h4 class="mt-5 mb-3">3. Блок <span style="font-weight: normal">“Отчет”</span></h4>
          <div class="text-subline"></div>
        </div>
        <div class="col-md-6 mt-4">
            Мы выделяем 27 форматов, которые вытекают из вышестоящих данных о 4 ФМ по структуре обработки и 3 ФМ по объему потребления информации
        </div>
        <div class="col-md-6 mt-4">
            Ниже вы можете посмотреть количественную статистику и подробное описание каждого человека, который проходил тестирование по этому проекту
        </div>
      </div>
    </div>
      <div class="users-list mt-5" style="min-height: 900px;">
          <div class="container ">
              <div class="row">
                  <div class="col-md-12 mb-4">
                      <div class="mb-4" style="display: flex;">
                          <div class="partsStats">
                              Всего человек прошло: <strong>{{staffSum}}</strong>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div class="col-md-12 mb-4">
                      <div class="partMenu">
                          <div class="menuElem" :class="{menuElemActive : !expertList}" @click="onExpertList(0)">ОБЩИЙ ОТЧЕТ</div>
                          <div class="menuElem" :class="{menuElemActive : expertList}" @click="onExpertList(1)">ЭКСПЕРТНАЯ ВЫБОРКА РЕСУРСНЫХ УПРАВЛЕНЦЕВ</div>
                          <a class="menuElem" href="https://forms.gle/HQd5md8VpD9RqWtP8" target="_blank">ЧТО ВЫ БЫ ХОТЕЛИ ДОБАВИТЬ?</a>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div class="col-md-12 mb-4" :class="{expertListClassHidden : !expertList}">
                      <div class="sortMenu">
                          <div v-for="(item, i) in partsGroupList"
                               :key="i"
                               :index="i"
                               :class="{sortActive : partsGroupActiveId === i}"
                               class="sortBlock"
                               @click="onClickPart(i)"
                          >
                              {{item.name}}
                          </div>
                      </div>
                      <div class="menuLine"></div>
                  </div>
              </div>
              <template v-if="!expertList">
              <div v-if="departments.length">
                  <transition-group name="list" tag="div" class="row">
                      <department-card
                              v-for="(item, i) in departments"
                              v-bind="item"
                              :key="i"
                              :key-id="i"
                              :count="item.staff.length"
                              class="mb-3"
                      />
                  </transition-group>
              </div>
              </template>
              <template v-else>
                  <div v-if="expertStaff.length">
                          <transition-group name="list" tag="div" class="row">
                          <div
                                  v-for="(item, i) in expertStaff"
                                  v-bind="item"
                                  :key="i"
                                  class="col-md-4"
                          >
                              <div class="mb-4">
                                  <div class="staffListBlock">
                                      <div class="staffListBlockItem">
                                          <div>{{item.name}}</div>
                                          <span>{{item.formatText}}</span>
                                      </div>
                                      <div class="text-subline-2"></div>
                                      <div class="otherText" @click="toReport(item.testId)">
                                          <div class="txt">Подробнее</div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          </transition-group>
                  </div>
              </template>
          </div>
      </div>

    <div style="background: #000; padding: 15px;">
    </div>
  </div>
</template>

<script>
/* eslint-disable */
import StaffCard from '../components/StaffCard'
import DepartmentCard from '../components/DepartmentCard'
import DepartmentCardStaff from '../components/DepartmentCardStaff'
import DATA from '../data';
import ClickOutside from 'vue-click-outside'
import VuePerfectScrollbar from 'vue-perfect-scrollbar'
import axios from 'axios'

export default {
  name: 'WelcomeView',
  components: { StaffCard, DepartmentCard, VuePerfectScrollbar,DepartmentCardStaff },
  directives: {
    ClickOutside
  },
  data: () => ({
    isActive: false,
    bottomArrowPosition: 325,
    upArrowPosition: 325,
    departments: [],
    partsGroupActiveId: 0,
    staffSum: 126,
    expertList: 1,
    expertStaff: [],
    partsGroupList: [
      {
        name: 'СТАБИЛЬНОСТЬ В УПРАВЛЕНИИ',
        params: {
          param_b: {
            ms: 15,
            mys: 10
          },
          param_m: {
            nkf: .60
          },
          userOnly: true,
          param_fm: [9]
        }
      },
      {
        name: 'КОНТРОЛЬ В УПРАВЛЕНИИ',
        params: {
          param_b: {
            ms: 15,
            mys: 10
          },
          param_m: {
            nkf: .60
          },
          param_fm: [10],
          userOnly: true,
        }
      },
      {
        name: 'АКТИВНОСТЬ В УПРАВЛЕНИИ',
        params: {
          param_b: {
            ms: 15,
            mys: 10
          },
          param_m: {
            nkf: .60
          },
          param_fm: [11,12],
          userOnly: true,
        }
      }
    ],
  }),
  computed: {
  },
  async created() {
    await this.loadParts ();
    // this.expertStaff = await this.sortedArray();
    // this.staffSum = await this.departments.reduce((acc, item) => acc + item.count, 0);
  },
  methods: {
    async onExpertList (param) {

      if(param === 0 && this.expertList) {
        await this.loadPartsAll();
        this.departments = await this.sortedArray();
        this.expertList = !this.expertList;
      }

      if( param === 1 && !this.expertList) {
        this.expertList = !this.expertList;
      }

    },
    async onClickPart (index) {
      if(this.partsGroupActiveId !== index) {
        this.partsGroupActiveId = index
        await this.loadParts();
        //this.expertStaff = await this.sortedArray();
      }
    },
    async loadParts () {
      return await axios.get('https://formatmind.com/export/?a=nn', {params: this.partsGroupList[this.partsGroupActiveId].params}).then((response) => {
        this.expertStaff = response.data;
      });
    },
    async loadPartsAll () {
      return await axios.get('https://formatmind.com/export/?a=nn').then((response) => {
        this.departments = response.data.departments;
      });
    },
    toReport(testId) {
        this.$router.push({
          name: 'report-staff',
          params: {
            departmentId: 'u',
            staffId: testId
          }
        })
    },
    sortedArray: function() {
      function compare(a, b) {
        if (a.count < b.count)
          return 1;
        if (a.count > b.count)
          return -1;
        return 0;
      }

      return this.departments.sort(compare);
    },
  }
}
</script>

<style>
  ::-webkit-scrollbar { display:none; }

  .container {
    color: #374259;
  }
  .staffListBlock {
      background: #FFFFFF;
      box-shadow: 0px 0px 20px rgba(217, 225, 233, 0.4);
      border-radius: 10px;
      overflow: hidden;
  }
  .staffListBlockItem {
      padding: 10px 20px;
      font-style: normal;
      font-weight: 600;
      font-size: 18px;
      line-height: 23px;
  }
  .staffListBlockItem span {
      font-style: normal;
      font-weight: normal;
      font-size: 14px;
      line-height: 18px;

      color: rgba(55, 66, 89, 0.5);
  }

  .otherText {
      padding: 10px 20px;
      color: #007BFF;
      width: 132px;
      cursor: pointer;
  }
  .otherText:hover {
      color: #FFFFFF;
      background-color: #007BFF;
      transition: all 0.3s ease;
  }
  .otherText .txt{
      font-weight: normal;
      font-size: 14px;
  }
  .otherText .txt:before {
      content: '';
      position: absolute;
      background-image: url("../assets/images/arrow-r.svg");
      width: 13px;
      height: 8px;
      margin-top: 7px;
      margin-left: 80px;
  }
  .otherText:hover>.txt:before {
      transition: all 0.3s ease;
      background-image: url("../assets/images/arrow-r-white.svg");
  }

  .partMenu {
      float: left;
      overflow: hidden;
      border-radius: 10px;
      box-shadow: 0px 0px 20px rgba(217, 225, 233, 0.4);
  }
  .expertListClassHidden {
      display: none;
  }
  .menuElem {
      float: left;
      background: #FFFFFF;
      padding: 10px 30px;
      font-style: normal;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.5s ease;
      color: #374259;
  }
  .menuElem:hover {
      background: rgba(0, 123, 255, 0.02);
      transition: all 0.3s ease;
      text-decoration: none;
  }
  .menuElemActive {
      color: #FFFFFF;
      background: #007BFF!important;
  }

  .block-1 {
    background: rgba(217, 225, 233, 0.1);
  }
  .menuLine {
    border-bottom: 2px solid rgba(217, 225, 233, 0.2);
    width: 100%;
    float: left;
    margin-top: -17px;
  }
  .partsStats {
      font-style: normal;
      font-weight: normal;
      font-size: 24px;
      line-height: 30px;
      float: left;
      min-width: 312px;
  }
  .sortMenu {
      clear: both;
  }
  .sortBlock {
    margin: 15px;
      padding-bottom: 15px;
    float: left;
    font-style: normal;
    font-weight: 600;
    font-size: 14px;
    line-height: 18px;
    cursor: pointer;
    border-bottom: 2px solid rgba(0, 123, 255, 0);
  }
  .sortBlock:first-child {
      margin-left: 0;
  }
  .sortBlock:hover {
    border-bottom: 2px solid rgba(0, 123, 255, 0.2);
    transition: all 0.5s ease;
  }
  .sortActive {
      border-bottom: 2px solid rgba(0, 123, 255, 1)!important;
  }
  .users-list {
    background: rgba(217, 225, 233, 0.1);
    padding: 50px 0;
  }
  .text-subline {
    position: relative;
    height: 2px;
    padding: 0;
    background: rgba(217, 225, 233, 0.2);;
    border: none;
  }
  .text-subline-2 {
    position: relative;
    height: 2px;
    padding: 0;
    background: rgba(217, 225, 233, 0.2);;
    border: none;
  }
  .text span {
    font-weight: bold;
  }
  .text-subline:before {
     content: '';
     position: absolute;
     top: 0;
     left: 0;
     height: 2px;
     width: 90px;
     background: #007BFF;
   }

  .block-1-item-pr {
      padding: 10px;
  }
  .block-1-item {
      background: #FFFFFF;
      box-shadow: 0px 0px 20px rgba(217, 225, 233, 0.4);
      border-radius: 10px;
      padding: 22px;
  }

  .welcome {
  }

  .block-format {
    background: #FFFFFF;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.04);
    border-radius: 10px;
    margin-top: 25px;
  }
  .block-format .block-title {
    background: rgba(217, 225, 233, 0.2);
    border-radius: 10px 0;
    padding: 13px 30px;
    display: block;
    float: left;

    font-style: normal;
    font-weight: normal;
    font-size: 24px;
    line-height: 30px;

    color: #374259;
  }
  .block-title-f {
      background: rgba(217, 225, 233, 0.2);
      border-radius: 10px 0;
      padding: 13px 30px;
      display: block;
      float: left;

      font-style: normal;
      font-weight: bold;
      font-size: 24px;
      line-height: 30px;
      color: #374259;
  }
  .block-title-f img {
      margin-right: 10px;
  }

  .format-disc-footer{
      text-align: center;
      padding: 15px;
      font-weight: bold;
  }
  .format-disc-footer img {
      margin-left: 5px;
  }
  .format-disc-footer-active {
      background-color: #007BFF;
      color: #FFFFFF;
  }
  .block-format {
      overflow: hidden;
  }

  .block-format .block-title img {
    margin-right: 10px;
  }
  .block-format .text {
    padding: 25px;
    display: inline-block;
  }
  h4 {

    font-style: normal!important;
    font-weight: bold!important;
    line-height: 38px;
    color: #374259;
  }
  .block-format .green {
    background: rgba(181, 226, 79, 0.1);
    color: #486700;
  }
  .block-format .purple {
    background: rgba(104, 112, 246, 0.1);
    color: #000561;
  }
  .block-format .red {
    background: rgba(236, 50, 50, 0.1);
    color: #550000;
  }
  .block-format .blue {
    background: rgba(86, 193, 232, 0.1);
    color: #005D80;
  }
  .s48 {
    font-size: 3rem;
    font-weight: 100;
  }
  .s36 {
    font-size: 36px;
    font-style: normal;
    font-weight: normal;
    line-height: 45px;
  }
  .mb-4-5 {
    margin-bottom: 2.2rem!important;
  }
  .mt-4-5 {
    margin-top: 2.2rem!important;
  }

  .list-item {
      display: inline-block;
      margin-right: 10px;
  }
  .list-enter-active, .list-leave-active {
      transition: all 1s;
  }
  .list-enter, .list-leave-to /* .list-leave-active до версии 2.1.8 */ {
      opacity: 0;
      transform: translateY(30px);
  }


</style>
